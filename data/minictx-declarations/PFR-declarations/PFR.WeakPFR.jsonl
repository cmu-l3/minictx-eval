{"name":"dimension_le_of_coset_cover","declaration":"theorem dimension_le_of_coset_cover {G : Type u_1} [AddCommGroup G] (A : Set G) (S : Submodule ℤ G) (v : G) (hA : ∀ a ∈ A, a - v ∈ S) : dimension A ≤ FiniteDimensional.finrank ℤ ↥S"}
{"name":"torsion_dist_shrinking","declaration":"/-- If $G$ is a torsion-free group and $X,Y$ are $G$-valued random variables and\n$\\phi : G\\to \\mathbb{F}_2^d$ is a homomorphism then\n\\[\\mathbb{H}(\\phi(X))\\leq 10d[X;Y].\\] -/\ntheorem torsion_dist_shrinking {G : Type u} [AddCommGroup G] [MeasurableSpace G] [MeasurableSingletonClass G] [Countable G] {Ω : Type u} {Ω' : Type u} [MeasurableSpace Ω] [MeasurableSpace Ω'] (X : Ω → G) (Y : Ω' → G) (μ : autoParam (MeasureTheory.Measure Ω) _auto✝) (μ' : autoParam (MeasureTheory.Measure Ω') _auto✝) [MeasureTheory.IsProbabilityMeasure μ] [MeasureTheory.IsProbabilityMeasure μ'] {H : Type u} [FiniteRange X] [FiniteRange Y] (hX : Measurable X) (hY : Measurable Y) [AddCommGroup H] [ElementaryAddCommGroup H 2] [MeasurableSpace H] [MeasurableSingletonClass H] [Countable H] (hG : AddMonoid.IsTorsionFree G) (φ : G →+ H) : H[⇑φ ∘ X ; μ] ≤ 10 * d[X ; μ # Y ; μ']"}
{"name":"weak_PFR_int","declaration":"/-- Let $A\\subseteq \\mathbb{Z}^d$ and $\\lvert A-A\\rvert\\leq K\\lvert A\\rvert$.\nThere exists $A'\\subseteq A$ such that $\\lvert A'\\rvert \\geq K^{-17}\\lvert A\\rvert$\nand $\\dim A' \\leq \\frac{40}{\\log 2} \\log K$.-/\ntheorem weak_PFR_int {G : Type u} [AddCommGroup G] [Module.Free ℤ G] [Module.Finite ℤ G] [Countable G] [MeasurableSpace G] [MeasurableSingletonClass G] {A : Set G} [Finite ↑A] (hnA : Set.Nonempty A) {K : ℝ} (hK : 0 < K) (hA : ↑(Nat.card ↑(A - A)) ≤ K * ↑(Nat.card ↑A)) : ∃ A' ⊆ A, ↑(Nat.card ↑A') ≥ K ^ (-17) * ↑(Nat.card ↑A) ∧ ↑(dimension A') ≤ 40 / Real.log 2 * Real.log K"}
{"name":"IsShift.sub_self_congr","declaration":"theorem IsShift.sub_self_congr {G : Type u_1} [AddCommGroup G] {A : Set G} {B : Set G} : IsShift A B → A - A = B - B"}
{"name":"weak_PFR","declaration":"/-- If $A\\subseteq \\mathbb{Z}^d$ is a finite non-empty set with $d[U_A;U_A]\\leq \\log K$ then there exists a non-empty $A'\\subseteq A$ such that\n$\\lvert A'\\rvert\\geq K^{-17}\\lvert A\\rvert$\nand $\\dim A'\\leq \\frac{40}{\\log 2} \\log K$. -/\ntheorem weak_PFR {G : Type u} [AddCommGroup G] [Module.Free ℤ G] [Module.Finite ℤ G] [Countable G] [MeasurableSpace G] [MeasurableSingletonClass G] {A : Set G} [Finite ↑A] {K : ℝ} (hA : Set.Nonempty A) (hK : 0 < K) (hdist : dᵤ[A # A] ≤ Real.log K) : ∃ A' ⊆ A, ↑(Nat.card ↑A') ≥ K ^ (-17) * ↑(Nat.card ↑A) ∧ ↑(dimension A') ≤ 40 / Real.log 2 * Real.log K"}
{"name":"weak_PFR_asymm","declaration":"/-- If $A,B\\subseteq \\mathbb{Z}^d$ are finite non-empty sets then there exist non-empty $A'\\subseteq A$ and $B'\\subseteq B$ such that\n\\[\\log\\frac{\\lvert A\\rvert\\lvert B\\rvert}{\\lvert A'\\rvert\\lvert B'\\rvert}\\leq 34 d[U_A;U_B]\\]\nsuch that $\\max(\\dim A',\\dim B')\\leq \\frac{40}{\\log 2} d[U_A;U_B]$. -/\ntheorem weak_PFR_asymm {G : Type u} [AddCommGroup G] [Module.Free ℤ G] [Module.Finite ℤ G] [Countable G] [MeasurableSpace G] [MeasurableSingletonClass G] (A : Set G) (B : Set G) [Finite ↑A] [Finite ↑B] (hA : Set.Nonempty A) (hB : Set.Nonempty B) : WeakPFRAsymmConclusion A B"}
{"name":"app_ent_PFR","declaration":"theorem app_ent_PFR {G : Type u} [AddCommGroup G] [ElementaryAddCommGroup G 2] [Fintype G] [MeasurableSpace G] [MeasurableSingletonClass G] {Ω : Type u_1} {Ω' : Type u_2} [MeasurableSpace Ω] [MeasurableSpace Ω'] (X : Ω → G) (Y : Ω' → G) (μ : autoParam (MeasureTheory.Measure Ω) _auto✝) (μ' : autoParam (MeasureTheory.Measure Ω') _auto✝) [MeasureTheory.IsProbabilityMeasure μ] [MeasureTheory.IsProbabilityMeasure μ'] (α : ℝ) (hent : 20 * d[X ; μ # Y ; μ'] < α * (H[X ; μ] + H[Y ; μ'])) (hX : Measurable X) (hY : Measurable Y) : ∃ H,\n  Real.log ↑(Nat.card ↥H) < (1 + α) / 2 * (H[X ; μ] + H[Y ; μ']) ∧\n    H[⇑(QuotientAddGroup.mk' H) ∘ X ; μ] + H[⇑(QuotientAddGroup.mk' H) ∘ Y ; μ'] < α * (H[X ; μ] + H[Y ; μ'])"}
{"name":"wlog_notInCoset","declaration":"/-- Without loss of generality, one can move (up to translation and embedding) any pair A, B of non-empty sets into a subgroup where they are not in a coset. -/\ntheorem wlog_notInCoset {G : Type u_1} [AddCommGroup G] {A : Set G} {B : Set G} (hA : Set.Nonempty A) (hB : Set.Nonempty B) : ∃ G' A' B', IsShift A (Subtype.val '' A') ∧ IsShift B (Subtype.val '' B') ∧ NotInCoset A' B'"}
{"name":"instMeasurableSingletonClassQuotientAddSubgroupToAddGroupInstHasQuotientAddSubgroupMeasurableSpace","declaration":"instance instMeasurableSingletonClassQuotientAddSubgroupToAddGroupInstHasQuotientAddSubgroupMeasurableSpace {G : Type u} [AddCommGroup G] [Fintype G] [MeasurableSpace G] [MeasurableSingletonClass G] (H : AddSubgroup G) : MeasurableSingletonClass (G ⧸ H)"}
{"name":"third_iso","declaration":"/-- A version of the third isomorphism theorem: if G₂ ≤ G and H' is a subgroup of G⧸G₂, then there is a canonical isomorphism between H⧸H' and G⧸N, where N is the preimage of H' in G. A bit clunky; may be a better way to do this -/\ntheorem third_iso {G : Type u} [AddCommGroup G] {G₂ : AddSubgroup G} (H' : AddSubgroup (G ⧸ G₂)) : let H := G ⧸ G₂;\nlet φ := QuotientAddGroup.mk' G₂;\nlet N := AddSubgroup.comap φ H';\n∃ e, ∀ (x : G), e ((QuotientAddGroup.mk' H') (φ x)) = (QuotientAddGroup.mk' N) x"}
{"name":"exists_coset_cover","declaration":"theorem exists_coset_cover {G : Type u_1} [AddCommGroup G] (A : Set G) : ∃ d S v, FiniteDimensional.finrank ℤ ↥S = d ∧ ∀ a ∈ A, a - v ∈ S"}
{"name":"dimension_le_rank","declaration":"theorem dimension_le_rank {G : Type u_1} [AddCommGroup G] [Module.Finite ℤ G] (A : Set G) : dimension A ≤ FiniteDimensional.finrank ℤ G"}
{"name":"torsion_free","declaration":"/-- A free Z-module is torsion-free. Move to Mathlib? -/\ntheorem torsion_free {G : Type u} [AddCommGroup G] [Module.Free ℤ G] : AddMonoid.IsTorsionFree G"}
{"name":"dimension","declaration":"/-- The dimension of the affine span over `ℤ` of a subset of an additive group. -/\ndef dimension {G : Type u_1} [AddCommGroup G] (A : Set G) : ℕ"}
{"name":"app_ent_PFR'","declaration":"/-- Let $G=\\mathbb{F}_2^n$ and $X,Y$ be $G$-valued random variables such that\n\\[\\mathbb{H}(X)+\\mathbb{H}(Y)> (20/\\alpha) d[X;Y],\\]\nfor some $\\alpha > 0$.\nThere is a non-trivial subgroup $H\\leq G$ such that\n\\[\\log \\lvert H\\rvert <(1+\\alpha)/2 (\\mathbb{H}(X)+\\mathbb{H}(Y))\\] and\n\\[\\mathbb{H}(\\psi(X))+\\mathbb{H}(\\psi(Y))< \\alpha (\\mathbb{H}(X)+\\mathbb{H}(Y))\\]\nwhere $\\psi:G\\to G/H$ is the natural projection homomorphism.\n-/\ntheorem app_ent_PFR' {G : Type u} [AddCommGroup G] [ElementaryAddCommGroup G 2] [Fintype G] [MeasurableSpace G] [MeasurableSingletonClass G] {Ω : Type u_1} {Ω' : Type u_2} [MeasureTheory.MeasureSpace Ω] [MeasureTheory.MeasureSpace Ω'] (X : Ω → G) (Y : Ω' → G) [MeasureTheory.IsProbabilityMeasure MeasureTheory.volume] [MeasureTheory.IsProbabilityMeasure MeasureTheory.volume] {α : ℝ} (hent : 20 * d[X # Y] < α * (H[X] + H[Y])) (hX : Measurable X) (hY : Measurable Y) : ∃ H,\n  Real.log ↑(Nat.card ↥H) < (1 + α) / 2 * (H[X] + H[Y]) ∧\n    H[⇑(QuotientAddGroup.mk' H) ∘ X] + H[⇑(QuotientAddGroup.mk' H) ∘ Y] < α * (H[X] + H[Y])"}
{"name":"PFR_projection'","declaration":"/-- If $G=\\mathbb{F}_2^d$ and $X,Y$ are $G$-valued random variables and $\\alpha < 1$ then there is\na subgroup  $H\\leq \\mathbb{F}_2^d$ such that\n\\[\\log \\lvert H\\rvert \\leq (1 + α) / (2 * (1 - α)) * (\\mathbb{H}(X)+\\mathbb{H}(Y))\\]\nand if $\\psi:G \\to G/H$ is the natural projection then\n\\[\\mathbb{H}(\\psi(X))+\\mathbb{H}(\\psi(Y))\\leq 20/\\alpha * d[\\psi(X);\\psi(Y)].\\] -/\ntheorem PFR_projection' {G : Type u} [AddCommGroup G] [ElementaryAddCommGroup G 2] [Fintype G] [MeasurableSpace G] [MeasurableSingletonClass G] {Ω : Type u_1} {Ω' : Type u_2} [MeasurableSpace Ω] [MeasurableSpace Ω'] (X : Ω → G) (Y : Ω' → G) (μ : autoParam (MeasureTheory.Measure Ω) _auto✝) (μ' : autoParam (MeasureTheory.Measure Ω') _auto✝) [MeasureTheory.IsProbabilityMeasure μ] [MeasureTheory.IsProbabilityMeasure μ'] (α : ℝ) (hX : Measurable X) (hY : Measurable Y) (αpos : 0 < α) (αone : α < 1) : ∃ H,\n  Real.log ↑(Nat.card ↥H) ≤ (1 + α) / (2 * (1 - α)) * (H[X ; μ] + H[Y ; μ']) ∧\n    α * (H[⇑(QuotientAddGroup.mk' H) ∘ X ; μ] + H[⇑(QuotientAddGroup.mk' H) ∘ Y ; μ']) ≤\n      20 * d[⇑(QuotientAddGroup.mk' H) ∘ X ; μ # ⇑(QuotientAddGroup.mk' H) ∘ Y ; μ']"}
{"name":"sum_prob_preimage","declaration":"theorem sum_prob_preimage {G : Type u_1} {H : Type u_2} {X : Finset H} {A : Set G} [Finite ↑A] {φ : ↑A → { x // x ∈ X }} {A_ : H → Set G} (hA : Set.Nonempty A) (hφ : ∀ (x : { x // x ∈ X }), A_ ↑x = Subtype.val '' (φ ⁻¹' {x})) : (Finset.sum X fun x => ↑(Nat.card ↑(A_ x)) / ↑(Nat.card ↑A)) = 1"}
{"name":"Finsupp.mapRange_surjective","declaration":"/-- Move to Mathlib? `Finsupp.mapRange` of a surjective function is surjective. -/\ntheorem Finsupp.mapRange_surjective {α : Type u_1} {M : Type u_5} {N : Type u_7} [Zero M] [Zero N] (f : M → N) (hf : f 0 = 0) (hs : Function.Surjective f) : Function.Surjective (Finsupp.mapRange f hf)"}
{"name":"weak_PFR_quotient_prelim","declaration":"/-- If G is a rank n free Z-module, then G/2G is a finite elementary 2-group of cardinality 2^n.  Code is slow, needs to be golfed -/\ntheorem weak_PFR_quotient_prelim {G : Type u} [AddCommGroup G] [Module.Free ℤ G] [Module.Finite ℤ G] : let H := G ⧸ AddMonoidHom.range (zsmulAddGroupHom 2);\nElementaryAddCommGroup H 2 ∧ Finite H ∧ Nat.card H = 2 ^ FiniteDimensional.finrank ℤ G"}
{"name":"WeakPFRAsymmConclusion","declaration":"/-- Separating out the conclusion of `weak_PFR_asymm` for convenience of induction arguments.-/\ndef WeakPFRAsymmConclusion {G : Type u} [AddCommGroup G] [MeasurableSpace G] (A : Set G) (B : Set G) : Prop"}
{"name":"weak_PFR_asymm_prelim","declaration":"/-- Given two non-empty finite subsets A, B of a rank n free Z-module G, there exists a subgroup N and points x, y in G/N such that the fibers Ax, By of A, B over x, y respectively are non-empty, one has the inequality\n$$ \\log \\frac{|A| |B|}{|A_x| |B_y|} ≤ 34 (d[U_A; U_B] - d[U_{A_x}; U_{B_y}])$$\nand one has the dimension bound\n$$ n \\log 2 ≤ \\log |G/N| + 40 d[U_A; U_B].$$\n -/\ntheorem weak_PFR_asymm_prelim {G : Type u} [AddCommGroup G] [Module.Free ℤ G] [Module.Finite ℤ G] [Countable G] [MeasurableSpace G] [MeasurableSingletonClass G] (A : Set G) (B : Set G) [Finite ↑A] [Finite ↑B] (hnA : Set.Nonempty A) (hnB : Set.Nonempty B) : ∃ N x y Ax By,\n  Set.Nonempty Ax ∧\n    Set.Nonempty By ∧\n      Set.Finite Ax ∧\n        Set.Finite By ∧\n          Ax = {z | z ∈ A ∧ (QuotientAddGroup.mk' N) z = x} ∧\n            By = {z | z ∈ B ∧ (QuotientAddGroup.mk' N) z = y} ∧\n              Real.log 2 * ↑(FiniteDimensional.finrank ℤ G) ≤ Real.log ↑(Nat.card (G ⧸ N)) + 40 * dᵤ[A # B] ∧\n                Real.log ↑(Nat.card ↑A) + Real.log ↑(Nat.card ↑B) - Real.log ↑(Nat.card ↑Ax) -\n                    Real.log ↑(Nat.card ↑By) ≤\n                  34 * (dᵤ[A # B] - dᵤ[Ax # By])"}
{"name":"four_logs","declaration":"theorem four_logs {a : ℝ} {b : ℝ} {c : ℝ} {d : ℝ} (ha : 0 < a) (hb : 0 < b) (hc : 0 < c) (hd : 0 < d) : Real.log (a * b / (c * d)) = Real.log a + Real.log b - Real.log c - Real.log d"}
{"name":"dimension_of_shift","declaration":"/-- In fact one has equality here, but this is tricker to prove and not needed for the argument. -/\ntheorem dimension_of_shift {G : Type u} [AddCommGroup G] {H : AddSubgroup G} (A : Set ↥H) (x : G) : dimension ((fun a => ↑a + x) '' A) ≤ dimension A"}
{"name":"single","declaration":"theorem single {Ω : Type u} [MeasurableSpace Ω] [DiscreteMeasurableSpace Ω] (μ : MeasureTheory.Measure Ω) [MeasureTheory.IsProbabilityMeasure μ] {A : Set Ω} {z : Ω} (hA : μ.real A = 1) (hz : μ.real {z} > 0) : z ∈ A"}
{"name":"NotInCoset","declaration":"/-- The property of two sets A, B of a group G not being contained in cosets of the same proper\nsubgroup -/\ndef NotInCoset {G : Type u_1} [AddCommGroup G] (A : Set G) (B : Set G) : Prop"}
{"name":"IsShift","declaration":"def IsShift {G : Type u_1} [AddCommGroup G] (A : Set G) (B : Set G) : Prop"}
{"name":"PFR_projection","declaration":"/-- If $G=\\mathbb{F}_2^d$ and $X,Y$ are $G$-valued random variables then there is\na subgroup  $H\\leq \\mathbb{F}_2^d$ such that\n\\[\\log \\lvert H\\rvert \\leq 2 * (\\mathbb{H}(X)+\\mathbb{H}(Y))\\]\nand if $\\psi:G \\to G/H$ is the natural projection then\n\\[\\mathbb{H}(\\psi(X))+\\mathbb{H}(\\psi(Y))\\leq 34 * d[\\psi(X);\\psi(Y)].\\] -/\ntheorem PFR_projection {G : Type u} [AddCommGroup G] [ElementaryAddCommGroup G 2] [Fintype G] [MeasurableSpace G] [MeasurableSingletonClass G] {Ω : Type u_1} {Ω' : Type u_2} [MeasurableSpace Ω] [MeasurableSpace Ω'] (X : Ω → G) (Y : Ω' → G) (μ : autoParam (MeasureTheory.Measure Ω) _auto✝) (μ' : autoParam (MeasureTheory.Measure Ω') _auto✝) [MeasureTheory.IsProbabilityMeasure μ] [MeasureTheory.IsProbabilityMeasure μ'] (hX : Measurable X) (hY : Measurable Y) : ∃ H,\n  Real.log ↑(Nat.card ↥H) ≤ 2 * (H[X ; μ] + H[Y ; μ']) ∧\n    H[⇑(QuotientAddGroup.mk' H) ∘ X ; μ] + H[⇑(QuotientAddGroup.mk' H) ∘ Y ; μ'] ≤\n      34 * d[⇑(QuotientAddGroup.mk' H) ∘ X ; μ # ⇑(QuotientAddGroup.mk' H) ∘ Y ; μ']"}
{"name":"conclusion_transfers","declaration":"theorem conclusion_transfers {G : Type u} [AddCommGroup G] [Countable G] [MeasurableSpace G] [MeasurableSingletonClass G] {A : Set G} {B : Set G} (G' : AddSubgroup G) (A' : Set ↥G') (B' : Set ↥G') (hA : IsShift A (Subtype.val '' A')) (hB : IsShift B (Subtype.val '' B')) [Finite ↑A'] [Finite ↑B'] (hA' : Set.Nonempty A') (hB' : Set.Nonempty B') (h : WeakPFRAsymmConclusion A' B') : WeakPFRAsymmConclusion A B"}
{"name":"single_fibres","declaration":"/-- Let $\\phi : G\\to H$ be a homomorphism and $A,B\\subseteq G$ be finite subsets. If $x,y\\in H$ then let $A_x=A\\cap \\phi^{-1}(x)$ and $B_y=B\\cap \\phi^{-1}(y)$. There exist $x,y\\in H$ such that $A_x,B_y$ are both non-empty and\n\\[d[\\phi(U_A);\\phi(U_B)]\\log \\frac{\\lvert A\\rvert\\lvert B\\rvert}{\\lvert A_x\\rvert\\lvert B_y\\rvert}\\leq (\\mathbb{H}(\\phi(U_A))+\\mathbb{H}(\\phi(U_B)))(d(U_A,U_B)-d(U_{A_x},U_{B_y}).\\] -/\ntheorem single_fibres {G : Type u} {H : Type u} {Ω : Type u} {Ω' : Type u} [AddCommGroup G] [Countable G] [MeasurableSpace G] [MeasurableSingletonClass G] [AddCommGroup H] [Countable H] [MeasurableSpace H] [MeasurableSingletonClass H] [MeasureTheory.MeasureSpace Ω] [MeasureTheory.MeasureSpace Ω'] [MeasureTheory.IsProbabilityMeasure MeasureTheory.volume] [MeasureTheory.IsProbabilityMeasure MeasureTheory.volume] (φ : G →+ H) {A : Set G} {B : Set G} [Finite ↑A] [Finite ↑B] {UA : Ω → G} {UB : Ω' → G} (hA : Set.Nonempty A) (hB : Set.Nonempty B) (hUA' : Measurable UA) (hUB' : Measurable UB) (hUA : ProbabilityTheory.IsUniform A UA MeasureTheory.volume) (hUB : ProbabilityTheory.IsUniform B UB MeasureTheory.volume) (hUA_mem : ∀ (ω : Ω), UA ω ∈ A) (hUB_mem : ∀ (ω : Ω'), UB ω ∈ B) : ∃ x y Ax By,\n  Ax = A ∩ φ.toFun ⁻¹' {x} ∧\n    By = B ∩ φ.toFun ⁻¹' {y} ∧\n      Set.Nonempty Ax ∧\n        Set.Nonempty By ∧\n          d[φ.toFun ∘ UA # φ.toFun ∘ UB] *\n              Real.log (↑(Nat.card ↑A) * ↑(Nat.card ↑B) / (↑(Nat.card ↑Ax) * ↑(Nat.card ↑By))) ≤\n            (H[φ.toFun ∘ UA] + H[φ.toFun ∘ UB]) * (d[UA # UB] - dᵤ[Ax # By])"}
{"name":"IsShift.card_congr","declaration":"theorem IsShift.card_congr {G : Type u_1} [AddCommGroup G] {A : Set G} {B : Set G} : IsShift A B → Nat.card ↑A = Nat.card ↑B"}
{"name":"not_in_coset","declaration":"/-- The property of two sets A,B of a group G not being contained in cosets of the same proper subgroup -/\ndef not_in_coset {G : Type u} [AddCommGroup G] (A : Set G) (B : Set G) : Prop"}
{"name":"torsion_free_doubling","declaration":"/-- If $G$ is torsion-free and $X,Y$ are $G$-valued random variables then $d[X;2Y]\\leq 5d[X;Y]$.  -/\ntheorem torsion_free_doubling {G : Type u} [AddCommGroup G] [MeasurableSpace G] [MeasurableSingletonClass G] [Countable G] {Ω : Type u} {Ω' : Type u} [MeasurableSpace Ω] [MeasurableSpace Ω'] (X : Ω → G) (Y : Ω' → G) (μ : autoParam (MeasureTheory.Measure Ω) _auto✝) (μ' : autoParam (MeasureTheory.Measure Ω') _auto✝) [MeasureTheory.IsProbabilityMeasure μ] [MeasureTheory.IsProbabilityMeasure μ'] [FiniteRange X] [FiniteRange Y] (hX : Measurable X) (hY : Measurable Y) (hG : AddMonoid.IsTorsionFree G) : d[X ; μ # Y + Y ; μ'] ≤ 5 * d[X ; μ # Y ; μ']"}
